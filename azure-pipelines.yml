variables:
  projectDirectory: testapp
jobs:
  - job: Android
    pool:
      vmImage: 'macOS-10.13'
    steps:
    - task: FlutterInstall@0
    - task: InstallAppleProvisioningProfile@1
      inputs:
        provisioningProfileLocation: 'secureFiles'
        provProfileSecureFile: '8117b735-8a72-48f0-b4cd-5485db66beba.mobileprovision'
    - task: InstallAppleCertificate@2
      inputs:
        certSecureFile: 'cert_luxoft.p12'
        certPwd: '12345'
        keychain: 'temp'
    - task: FlutterBuild@0
      inputs:
        target: all
        projectDirectory: ./
    - task: CopyFiles@2
      inputs:
        contents: '**/*.apk'
        targetFolder: '$(build.artifactStagingDirectory)'